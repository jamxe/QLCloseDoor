# FuckQL
一款可用于某开门软件的后台自动挂机操作工具

![fuckql](https://github.com/kasuganosoras/FuckQL/assets/34357771/a4b41d74-dfe1-4f23-8bba-bd9689d6d2dd)

## 功能介绍
众所周知某款开门软件广告非常多，如果想要去广告还得充钱，非常影响使用，但小区物业又逼着大家吃这坨史，为了应对这一问题，这款软件诞生了。这款软件可以利用家里闲置的设备或服务器来挂机运行软件，然后通过 API 请求来完成自动化开门操作。

- 支持自定义按钮位置
- 支持操作 3 个按钮（后续会考虑继续更新）
- 支持通过 API 远程调用，配合 HTTP Shortcuts 食用更佳
- 可配置延迟时间

## 使用方法
软件需要配合模拟器来进行操作，具体方法如下

> 有显卡的电脑推荐夜神模拟器，没显卡的可以用网易 mumu 模拟器

1. 下载安装任意支持 ADB 的模拟器，建议选择 Android 12 版本
2. 在模拟器内正常安装此开门软件
3. 根据模拟器官方说明寻找 ADB 端口（夜神默认 `62001`，网易 mumu 默认 `16384`）
4. 在软件内的 ADB 地址处输入 `127.0.0.1`，端口输入对应的 ADB 端口。
5. 软件右侧日志出现 `Connect: 模拟器型号` 则表示已经连接成功

## 按钮坐标配置
夜神模拟器配置：
* 按钮1 X：`541`
* 按钮1 Y：`641`
* 按钮2 X：`205`
* 按钮2 Y：`938`
* 按钮3 X：`541`
* 按钮3 Y：`938`

网易 mumu 模拟器配置：
* 按钮1 X：`541`
* 按钮1 Y：`938`
* 按钮2 X：`230`
* 按钮2 Y：`1319`
* 按钮3 X：`541`
* 按钮3 Y：`1319`

其他模拟器可以通过在开发者选项里启用 __指针位置__ 选项，然后滑动屏幕来查看当前 X Y 坐标（屏幕顶上会显示）。

## 配合 HTTP Shortcuts 使用
你可以下载并安装 [HTTP Shortcuts](https://http-shortcuts.rmy.ch/) 或其他类似软件来实现在主屏幕上点击按钮一键开门。

要实现远程开门，你需要使用有公网 IP 的电脑来挂机或者配合内网穿透使用，此部分已超出本项目的范畴，请自行上网搜寻相关教程。

在 HTTP Shortcuts 内创建一个新的快捷方式，基本设置里面按照以下进行设置：

```text
请求方法：GET
请求地址：http://你的外网IP:外网端口号/click?token=你的秘钥&btn=按钮编号
```

* **外网 IP：** 如果你的电脑有公网 IP，并且你做了端口转发，此处可以填写你的外网 IP 或者 DDNS 映射的域名；如果你使用的是内网穿透，请在这里填写你穿透后的域名或 IP 地址。
* **外网端口号：** 软件默认监听的端口号是 `14190`，如果你做了端口转发或内网穿透，请在这里填写外网端口。
* **你的秘钥：** 在这里填写你的秘钥（秘钥在 config.ini 里面可以配置），默认是 `123456789`。
* **按钮编号：** 要点击的按钮，目前支持 `1`、`2`、`3` 三个按钮。

示例：
```
GET http://fuckql.example.com:14190/click?token=123456789&btn=1
```

保存快捷方式，然后将它放置到桌面上，你就可以使用桌面快捷方式来一键开门了。

> ### ⚠️ 请注意
> 每次点击开门按钮之后请等待 30 秒左右再次点击，因为每次开门之后软件会自动重启来关闭广告。

## 其他 API

* 点击屏幕指定坐标：`/click?token=你的秘钥&x=横向坐标&y=纵向坐标`
* 获取模拟器屏幕截图：`/screenshot?token=你的秘钥`
* 重启开门软件：`/restart?token=你的秘钥`

调用方法参考上面按钮配置。

## 编译说明
编译完成后你需要将 adb 目录复制到编译后的二进制文件同目录下，软件会在启用时自动调用 adb\adb.exe 来连接模拟器。
